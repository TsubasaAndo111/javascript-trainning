{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://ch17/webpack/bootstrap","webpack://ch17/webpack/runtime/global","webpack://ch17/webpack/runtime/hasOwnProperty shorthand","webpack://ch17/webpack/runtime/publicPath","webpack://ch17/webpack/runtime/jsonp chunk loading","webpack://ch17/./ex06/src/renderGrid.js","webpack://ch17/./ex06/src/index.js","webpack://ch17/./ex06/src/constants.js","webpack://ch17/./ex06/src/updateGrid.js"],"sourcesContent":["// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript && document.currentScript.tagName.toUpperCase() === 'SCRIPT')\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/^blob:/, \"\").replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","__webpack_require__.b = (typeof document !== 'undefined' && document.baseURI) || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// no jsonp function","// grid を canvas に描画する\r\n// exportに伴い、引数を追加\r\nexport function renderGrid(grid, ctx, rows, cols, resolution) {\r\n    for (let row = 0; row < rows; row++) {\r\n      for (let col = 0; col < cols; col++) {\r\n        const cell = grid[row][col];\r\n        ctx.beginPath();\r\n        ctx.rect(col * resolution, row * resolution, resolution, resolution);\r\n        ctx.fillStyle = cell ? \"black\" : \"white\";\r\n        ctx.fill();\r\n        ctx.stroke();\r\n      }\r\n    }\r\n  }\r\n  ","import { ROWS, COLS, RESOLUTION, UPDATE_INTERVAL } from \"./constants.js\";\nimport { renderGrid } from \"./renderGrid.js\";\nimport { updateGrid } from \"./updateGrid.js\";\n\nconst canvas = document.querySelector(\"#screen\");\nconst ctx = canvas.getContext(\"2d\");\nconst startButton = document.querySelector(\"#start\");\nconst pauseButton = document.querySelector(\"#pause\");\n\ncanvas.width = ROWS * RESOLUTION;\ncanvas.height = COLS * RESOLUTION;\n\n// requestAnimationFrame が返す ID\nlet animationId = null;\n\nconst soundUrl = new URL(\"./decision1.mp3\", import.meta.url);\nconst sound = new Audio(soundUrl);\n\n// ライフゲームのセル (true/false) をランダムに初期化\nlet grid = new Array(ROWS)\n  .fill(null)\n  .map(() => new Array(COLS).fill(null).map(() => !!Math.floor(Math.random() * 2)));\n\n// canvas クリックでセル反転\ncanvas.addEventListener(\"click\", function (evt) {\n  const rect = canvas.getBoundingClientRect();\n  const pos = { x: evt.clientX - rect.left, y: evt.clientY - rect.top };\n\n  const row = Math.floor(pos.y / RESOLUTION);\n  const col = Math.floor(pos.x / RESOLUTION);\n\n  grid[row][col] = !grid[row][col];\n  sound.cloneNode().play();\n\n  renderGrid(grid, ctx, ROWS, COLS, RESOLUTION);\n});\n\n// 10FPS相当に抑制\nlet lastTime = 0;\n\nfunction update(timestamp) {\n  if (!lastTime) lastTime = timestamp;\n\n  const delta = timestamp - lastTime;\n\n  if (delta >= UPDATE_INTERVAL) {\n    grid = updateGrid(grid, ROWS, COLS);\n    renderGrid(grid, ctx, ROWS, COLS, RESOLUTION);\n    lastTime = timestamp;\n  }\n\n  animationId = requestAnimationFrame(update);\n}\n\nstartButton.addEventListener(\"click\", () => {\n  if (animationId) return;\n  update(0);\n});\n\npauseButton.addEventListener(\"click\", () => {\n  if (!animationId) return;\n  cancelAnimationFrame(animationId);\n  animationId = null;\n});\n\nrenderGrid(grid, ctx, ROWS, COLS, RESOLUTION);","// 1秒間に何回更新するか（=10FPS）\r\nexport const UPDATE_INTERVAL = 100; // ms\r\n\r\n// 50 x 50 の盤面とする\r\nexport const ROWS = 50;\r\nexport const COLS = 50;\r\n// 1セルのサイズ\r\nexport const RESOLUTION = 10;","// Life Game のルールに従ってセルを更新する\r\n// exportに伴い、引数を追加\r\n\r\nexport function updateGrid(grid, rows, cols) {\r\n    // 新しいグリッドを作成（浅いコピー）\r\n    const nextGrid = grid.map((arr) => [...arr]);\r\n  \r\n    for (let row = 0; row < rows; row++) {\r\n      for (let col = 0; col < cols; col++) {\r\n        let aliveCount = 0;\r\n  \r\n        // 周囲 8 マスの生存数を数える\r\n        for (let dr = -1; dr <= 1; dr++) {\r\n          for (let dc = -1; dc <= 1; dc++) {\r\n            if (dr === 0 && dc === 0) continue;\r\n  \r\n            const r = row + dr;\r\n            const c = col + dc;\r\n  \r\n            if (r >= 0 && r < rows && c >= 0 && c < cols) {\r\n              if (grid[r][c]) aliveCount++;\r\n            }\r\n          }\r\n        }\r\n  \r\n        const cell = grid[row][col];\r\n  \r\n        // ライフゲームのルール\r\n        if (cell) {\r\n          nextGrid[row][col] = aliveCount === 2 || aliveCount === 3;\r\n        } else {\r\n          nextGrid[row][col] = aliveCount === 3;\r\n        }\r\n      }\r\n    }\r\n  \r\n    return nextGrid;\r\n  }\r\n  "],"names":["__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","m","g","globalThis","this","Function","e","window","o","obj","prop","Object","prototype","hasOwnProperty","call","scriptUrl","importScripts","location","document","currentScript","tagName","toUpperCase","src","scripts","getElementsByTagName","length","i","test","Error","replace","p","b","baseURI","self","href","renderGrid","grid","ctx","rows","cols","resolution","row","col","cell","beginPath","rect","fillStyle","fill","stroke","canvas","querySelector","getContext","startButton","pauseButton","width","ROWS","height","COLS","animationId","soundUrl","URL","sound","Audio","Array","map","Math","floor","random","addEventListener","evt","getBoundingClientRect","pos","clientX","left","clientY","top","cloneNode","play","lastTime","update","timestamp","nextGrid","arr","aliveCount","dr","dc","r","c","updateGrid","requestAnimationFrame","cancelAnimationFrame"],"sourceRoot":""}